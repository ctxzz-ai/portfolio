<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Flux Bloom</title>
    <style>
      html,
      body {
        margin: 0;
        height: 100%;
        overflow: hidden;
        background: radial-gradient(circle at 50% 15%, #1b0619, #050107 70%);
      }

      canvas {
        width: 100%;
        height: 100%;
        display: block;
      }

      .overlay {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: 'Outfit', sans-serif;
        letter-spacing: 0.22em;
        text-transform: uppercase;
        pointer-events: none;
        color: rgba(255, 222, 255, 0.7);
        font-size: clamp(0.55rem, 1.1vw, 0.75rem);
      }
    </style>
  </head>
  <body>
    <canvas id="flux"></canvas>
    <div class="overlay">Flux Bloom</div>
    <script type="module">
      import * as THREE from 'https://unpkg.com/three@0.158.0/build/three.module.js';

      const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('flux'), antialias: true, alpha: true });
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

      const scene = new THREE.Scene();

      const camera = new THREE.PerspectiveCamera(52, window.innerWidth / window.innerHeight, 0.1, 120);
      camera.position.set(0, 0, 11);

      const petals = new THREE.InstancedMesh(
        new THREE.SphereGeometry(0.18, 16, 16),
        new THREE.MeshStandardMaterial({ color: 0xff7bca, emissive: 0x2b0221, emissiveIntensity: 0.8, roughness: 0.3, metalness: 0.4 }),
        250
      );

      const dummy = new THREE.Object3D();
      for (let i = 0; i < 250; i += 1) {
        const radius = THREE.MathUtils.randFloat(1.5, 4.8);
        const angle = THREE.MathUtils.randFloat(0, Math.PI * 2);
        const height = THREE.MathUtils.randFloatSpread(2.2);
        dummy.position.set(Math.cos(angle) * radius, height, Math.sin(angle) * radius);
        dummy.scale.setScalar(THREE.MathUtils.randFloat(0.6, 1.4));
        dummy.rotation.set(THREE.MathUtils.randFloat(0, Math.PI), THREE.MathUtils.randFloat(0, Math.PI), THREE.MathUtils.randFloat(0, Math.PI));
        dummy.updateMatrix();
        petals.setMatrixAt(i, dummy.matrix);
      }
      scene.add(petals);

      const stems = new THREE.LineSegments(
        new THREE.WireframeGeometry(new THREE.TorusKnotGeometry(3.8, 0.24, 220, 14, 2, 5)),
        new THREE.LineBasicMaterial({ color: 0xffa5f4, transparent: true, opacity: 0.22 })
      );
      scene.add(stems);

      const auraGeometry = new THREE.SphereGeometry(6, 32, 32);
      const auraMaterial = new THREE.MeshBasicMaterial({ color: 0x8316ff, transparent: true, opacity: 0.08, side: THREE.BackSide });
      const aura = new THREE.Mesh(auraGeometry, auraMaterial);
      scene.add(aura);

      const rimLight = new THREE.PointLight(0xff8cea, 9, 35);
      rimLight.position.set(5, 4, 6);
      scene.add(rimLight);
      const key = new THREE.PointLight(0x922eff, 8, 30);
      key.position.set(-5, -4, -5);
      scene.add(key);
      scene.add(new THREE.AmbientLight(0x301233, 0.6));

      const clock = new THREE.Clock();

      function resize() {
        const width = window.innerWidth;
        const height = window.innerHeight;
        renderer.setSize(width, height, false);
        camera.aspect = width / height;
        camera.updateProjectionMatrix();
      }

      function animate() {
        const time = clock.getElapsedTime();
        petals.rotation.y = time * 0.22;
        petals.rotation.x = Math.sin(time * 0.3) * 0.2;
        stems.rotation.y = -time * 0.12;
        aura.rotation.y = time * 0.08;
        renderer.render(scene, camera);
      }

      resize();
      window.addEventListener('resize', resize);
      renderer.setAnimationLoop(animate);
    </script>
  </body>
</html>
